# üñºÔ∏è –°–ò–°–¢–ï–ú–ê –ü–†–ï–í–¨–Æ SVG –®–ê–ë–õ–û–ù–û–í

## üéØ –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç PNG –ø—Ä–µ–≤—å—é –¥–ª—è –≤—Å–µ—Ö –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö SVG —à–∞–±–ª–æ–Ω–æ–≤, —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥–ª–∏ –≤–∏–¥–µ—Ç—å –∫–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç —à–∞–±–ª–æ–Ω –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º.

## üîß –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ**
- –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ SVG —à–∞–±–ª–æ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è PNG –ø—Ä–µ–≤—å—é
- Dyno –ø–æ–ª—è –∑–∞–º–µ–Ω—è—é—Ç—Å—è –Ω–∞ –ø—Ä–∏–º–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–µ–≤—å—é —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `/output/previews/{template_id}_preview.png`

### 2. **–ü—Ä–∏–º–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø—Ä–µ–≤—å—é**
```python
preview_data = {
    'dyno.agentName': 'John Smith',
    'dyno.propertyAddress': '123 Main Street, Beverly Hills, CA 90210',
    'dyno.price': '$450,000',
    'dyno.bedrooms': '3',
    'dyno.bathrooms': '2',
    'dyno.sqft': '1,850',
    'dyno.agentPhone': '(555) 123-4567',
    'dyno.agentEmail': 'john@realty.com',
    'dyno.agentPhoto': 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d',
    'dyno.propertyImage': 'https://images.unsplash.com/photo-1560518883-ce09059eeffa',
    'dyno.propertyimage2': 'https://images.unsplash.com/photo-1570129477492-45c003edd2be',
    # ... –¥–æ dyno.propertyimage10
}
```

## üöÄ API Endpoints

### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —à–∞–±–ª–æ–Ω–æ–≤ —Å –ø—Ä–µ–≤—å—é
**GET** `/api/templates/all-previews`

#### –û—Ç–≤–µ—Ç:
```json
{
  "templates": [
    {
      "id": "uuid-123",
      "name": "Open House Main",
      "category": "open-house",
      "template_role": "main",
      "created_at": "2025-01-24 10:30:00",
      "preview_url": "/output/previews/uuid-123_preview.png",
      "preview_api_url": "/api/templates/uuid-123/preview"
    }
  ],
  "total": 1
}
```

### 2. –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–µ–≤—å—é –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–∞
**GET** `/api/templates/{template_id}/preview`

- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç PNG –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (Content-Type: image/png)
- –ï—Å–ª–∏ –ø—Ä–µ–≤—å—é –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –µ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- Fallback –Ω–∞ SVG –µ—Å–ª–∏ PNG –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–µ —É–¥–∞–ª–∞—Å—å

### 3. –ó–∞–≥—Ä—É–∑–∫–∞ —à–∞–±–ª–æ–Ω–∞ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ø—Ä–µ–≤—å—é
**POST** `/api/upload-single`

#### –û—Ç–≤–µ—Ç –≤–∫–ª—é—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–µ–≤—å—é:
```json
{
  "success": true,
  "template_id": "uuid-123",
  "preview_url": "/output/previews/uuid-123_preview.png",
  "preview_filename": "uuid-123_preview.png",
  "message": "–®–∞–±–ª–æ–Ω —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω"
}
```

## üíª Frontend Integration

### React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –≤—ã–±–æ—Ä–∞ —à–∞–±–ª–æ–Ω–æ–≤:
```typescript
import { TemplateSelector } from './agentflow-integration';

const MyComponent = () => {
  const [selectedTemplate, setSelectedTemplate] = useState<Template>();

  return (
    <TemplateSelector
      templateRole="main"
      selectedTemplate={selectedTemplate}
      onTemplateSelect={setSelectedTemplate}
    />
  );
};
```

### –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–µ–≤—å—é:
```jsx
<img
  src={template.preview_url}
  alt={`–ü—Ä–µ–≤—å—é ${template.name}`}
  className="w-full h-32 object-cover"
  onError={(e) => {
    // Fallback –Ω–∞ API URL –µ—Å–ª–∏ –ø—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
    const target = e.target as HTMLImageElement;
    if (target.src !== template.preview_api_url) {
      target.src = template.preview_api_url;
    }
  }}
/>
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
output/
‚îú‚îÄ‚îÄ previews/
‚îÇ   ‚îú‚îÄ‚îÄ {template_id}_preview.png
‚îÇ   ‚îú‚îÄ‚îÄ {template_id}_preview.png
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ carousel/
‚îÇ   ‚îî‚îÄ‚îÄ {carousel_id}/
‚îî‚îÄ‚îÄ single/
```

## üé® –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

### –†–∞–∑–º–µ—Ä—ã –ø—Ä–µ–≤—å—é:
- **–®–∏—Ä–∏–Ω–∞:** 400px
- **–í—ã—Å–æ—Ç–∞:** 300px (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- **–§–æ–Ω:** –ë–µ–ª—ã–π
- **–§–æ—Ä–º–∞—Ç:** PNG

### –ö–∞—á–µ—Å—Ç–≤–æ:
- –í—ã—Å–æ–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —á–µ—Ç–∫–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è –≤–µ–±-–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏

### 1. **–õ–µ–Ω–∏–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è**
- –ü—Ä–µ–≤—å—é –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- –ö—ç—à–∏—Ä—É–µ—Ç—Å—è –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —à–∞–±–ª–æ–Ω–∞

### 2. **Fallback —Å–∏—Å—Ç–µ–º–∞**
- PNG –ø—Ä–µ–≤—å—é (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
- SVG —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö (fallback)
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏

### 3. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**
- –ü—Ä–µ–≤—å—é –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
- –ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–µ–≤—å—é:
```python
# –ó–∞–≥—Ä—É–∑–∏—Ç–µ SVG —à–∞–±–ª–æ–Ω
response = requests.post('/api/upload-single', files={'svg_file': svg_file})

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø—Ä–µ–≤—å—é —Å–æ–∑–¥–∞–Ω–æ
assert 'preview_url' in response.json()

# –ü–æ–ª—É—á–∏—Ç–µ –ø—Ä–µ–≤—å—é
preview_response = requests.get(response.json()['preview_url'])
assert preview_response.status_code == 200
assert preview_response.headers['Content-Type'] == 'image/png'
```

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Å–∏—Å—Ç–µ–º—ã –ø—Ä–µ–≤—å—é

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
- **–í–∏–∑—É–∞–ª—å–Ω—ã–π –≤—ã–±–æ—Ä** - –≤–∏–¥—è—Ç –∫–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç —à–∞–±–ª–æ–Ω
- **–ë—ã—Å—Ç—Ä–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ** - –º–æ–≥—É—Ç —Å—Ä–∞–≤–Ω–∏—Ç—å —Ä–∞–∑–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã
- **–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ –≤—ã–±–æ—Ä–µ** - –∑–Ω–∞—é—Ç —á—Ç–æ –ø–æ–ª—É—á–∞—Ç

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:
- **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** - –ø—Ä–µ–≤—å—é —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - –±—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **Fallback** - —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

### –î–ª—è —Å–∏—Å—Ç–µ–º—ã:
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - PNG –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ SVG
- **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - PNG –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤–µ–∑–¥–µ
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —Ä–∞–∑–º–µ—Ä—ã

## üéØ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ SVG —à–∞–±–ª–æ–Ω–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –∫—Ä–∞—Å–∏–≤—ã–µ –ø—Ä–µ–≤—å—é, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –≤–∏–¥–µ—Ç—å –ø—Ä–∏ –≤—ã–±–æ—Ä–µ —à–∞–±–ª–æ–Ω–æ–≤ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ!