# üèóÔ∏è –ê–ù–ê–õ–ò–ó –ê–†–•–ò–¢–ï–ö–¢–£–†–´ –°–ï–†–í–ò–°–ê –§–õ–ê–ï–†–û–í –ù–ï–î–í–ò–ñ–ò–ú–û–°–¢–ò

## üìã –û–±—â–∞—è —Å—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã

```
–§–†–û–ù–¢–ï–ù–î (React/TS) 
    ‚Üì API –∑–∞–ø—Ä–æ—Å—ã
FLASK API –°–ï–†–í–ò–°
    ‚Üì –æ–±—Ä–∞–±–æ—Ç–∫–∞ SVG
–ì–ï–ù–ï–†–ê–¶–ò–Ø –§–õ–ê–ï–†–û–í
    ‚Üì —Ä–µ–∑—É–ª—å—Ç–∞—Ç
–ö–ê–†–£–°–ï–õ–¨ –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ô (–¥–æ 10 —Ñ–æ—Ç–æ)
```

## üéØ –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–ª–æ—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### 1. **–ó–∞–≥—Ä—É–∑–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤ (–∞–¥–º–∏–Ω)**
```
–ê–¥–º–∏–Ω ‚Üí /upload ‚Üí –ó–∞–≥—Ä—É–∂–∞–µ—Ç SVG —à–∞–±–ª–æ–Ω—ã:
‚îú‚îÄ‚îÄ Main Template (–æ—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ª–∏—Å—Ç–∏–Ω–≥–µ)
‚îî‚îÄ‚îÄ Photo Template (–¥–ª—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –∏–Ω—Ç–µ—Ä—å–µ—Ä–∞/—ç–∫—Å—Ç–µ—Ä—å–µ—Ä–∞)
```

### 2. **–í—ã–±–æ—Ä —à–∞–±–ª–æ–Ω–∞ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)**
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –§—Ä–æ–Ω—Ç–µ–Ω–¥ ‚Üí GET /api/templates/all-previews
‚îú‚îÄ‚îÄ –ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤
‚îú‚îÄ‚îÄ –í–∏–¥–∏—Ç –ø—Ä–µ–≤—å—é –∫–∞–∂–¥–æ–≥–æ —à–∞–±–ª–æ–Ω–∞
‚îî‚îÄ‚îÄ –í—ã–±–∏—Ä–∞–µ—Ç Main + Photo —à–∞–±–ª–æ–Ω
```

### 3. **–°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—É—Å–µ–ª–∏**
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø–æ–ª–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ:
‚îú‚îÄ‚îÄ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ª–∏—Å—Ç–∏–Ω–≥–µ (–∞–¥—Ä–µ—Å, —Ü–µ–Ω–∞, —Å–ø–∞–ª—å–Ω–∏, –≤–∞–Ω–Ω—ã–µ)
‚îú‚îÄ‚îÄ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞–≥–µ–Ω—Ç–µ (–∏–º—è, —Ç–µ–ª–µ—Ñ–æ–Ω, email, —Ñ–æ—Ç–æ)
‚îú‚îÄ‚îÄ –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ (–¥–æ 10 —à—Ç—É–∫)
‚îî‚îÄ‚îÄ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ API
```

## üîß API Endpoints

### –û—Å–Ω–æ–≤–Ω—ã–µ endpoints:
- `GET /api/templates/all-previews` - –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ —à–∞–±–ª–æ–Ω—ã
- `POST /api/generate/carousel` - —Å–æ–∑–¥–∞—Ç—å –∫–∞—Ä—É—Å–µ–ª—å –ø–æ ID —à–∞–±–ª–æ–Ω–æ–≤
- `POST /api/generate/carousel-by-name` - —Å–æ–∑–¥–∞—Ç—å –∫–∞—Ä—É—Å–µ–ª—å –ø–æ –∏–º–µ–Ω–∞–º —à–∞–±–ª–æ–Ω–æ–≤
- `POST /api/upload-single` - –∑–∞–≥—Ä—É–∑–∏—Ç—å –æ–¥–∏–Ω–æ—á–Ω—ã–π —à–∞–±–ª–æ–Ω
- `POST /api/upload-carousel` - –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø–∞—Ä—É —à–∞–±–ª–æ–Ω–æ–≤ (main+photo)

### –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π endpoint:
- `POST /api/carousel/create-and-generate` - **–ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù!**

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∫–∞—Ä—É—Å–µ–ª–∏:
```json
{
  "main_template_id": "uuid-main-template",
  "photo_template_id": "uuid-photo-template", 
  "replacements": {
    "dyno.agentName": "John Smith",
    "dyno.propertyAddress": "123 Main Street, Beverly Hills, CA 90210",
    "dyno.price": "$450,000",
    "dyno.bedrooms": "3",
    "dyno.bathrooms": "2",
    "dyno.sqft": "1,850",
    "dyno.agentPhone": "(555) 123-4567",
    "dyno.agentEmail": "john@realty.com",
    "dyno.agentPhoto": "https://example.com/agent.jpg",
    "dyno.propertyImage": "https://example.com/photo1.jpg"
  }
}
```

### –í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
```json
{
  "success": true,
  "carousel_id": "uuid-carousel",
  "main_url": "/output/carousel/carousel_uuid_main.svg",
  "photo_url": "/output/carousel/carousel_uuid_photo.svg"
}
```

## üé® –û–±—Ä–∞–±–æ—Ç–∫–∞ SVG

### –¢–∏–ø—ã –ø–æ–ª–µ–π –≤ —à–∞–±–ª–æ–Ω–∞—Ö:
1. **–¢–µ–∫—Å—Ç–æ–≤—ã–µ –ø–æ–ª—è:**
   - `dyno.agentName` - –∏–º—è –∞–≥–µ–Ω—Ç–∞
   - `dyno.propertyAddress` - –∞–¥—Ä–µ—Å (—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ø–µ—Ä–µ–Ω–æ—Å–æ–º)
   - `dyno.price` - —Ü–µ–Ω–∞
   - `dyno.bedrooms`, `dyno.bathrooms`, `dyno.sqft` - —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

2. **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:**
   - `dyno.agentPhoto` - —Ñ–æ—Ç–æ –∞–≥–µ–Ω—Ç–∞ (–∫—Ä—É–≥–ª–æ–µ, aspect ratio: meet)
   - `dyno.propertyImage` - —Ñ–æ—Ç–æ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ (–ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–µ, aspect ratio: slice)
   - `dyno.companyLogo` - –ª–æ–≥–æ—Ç–∏–ø –∫–æ–º–ø–∞–Ω–∏–∏ (aspect ratio: meet)

### –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞:
- **–ê–¥—Ä–µ—Å–∞**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–Ω–æ—Å –¥–ª–∏–Ω–Ω—ã—Ö –∞–¥—Ä–µ—Å–æ–≤ –Ω–∞ 2 —Å—Ç—Ä–æ–∫–∏
- **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è**: –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π aspect ratio –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤
- **–®—Ä–∏—Ñ—Ç—ã**: —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã—Ö —à—Ä–∏—Ñ—Ç–æ–≤ (Inter, Montserrat)
- **–≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**: –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª–æ–≤ (&, <, >, ", ')

## üöÄ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞—Ä—É—Å–µ–ª–∏

### –õ–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è:
1. **Main —Å–ª–∞–π–¥** - –æ—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ª–∏—Å—Ç–∏–Ω–≥–µ
2. **Photo —Å–ª–∞–π–¥—ã** - –¥–æ 10 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –∏–Ω—Ç–µ—Ä—å–µ—Ä–∞/—ç–∫—Å—Ç–µ—Ä—å–µ—Ä–∞
3. –ö–∞–∂–¥—ã–π —Å–ª–∞–π–¥ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ —Å –∑–∞–º–µ–Ω–æ–π dyno –ø–æ–ª–µ–π
4. –†–µ–∑—É–ª—å—Ç–∞—Ç: –Ω–∞–±–æ—Ä SVG —Ñ–∞–π–ª–æ–≤ –≥–æ—Ç–æ–≤—ã—Ö –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è

### –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
```
output/
‚îú‚îÄ‚îÄ carousel/
‚îÇ   ‚îú‚îÄ‚îÄ carousel_{id}_main.svg
‚îÇ   ‚îî‚îÄ‚îÄ carousel_{id}_photo.svg
‚îú‚îÄ‚îÄ single/
‚îÇ   ‚îî‚îÄ‚îÄ single_{id}.svg
‚îî‚îÄ‚îÄ previews/
    ‚îî‚îÄ‚îÄ {template_id}_preview.png
```

## ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º—ã –∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏

### 1. **–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π endpoint**
- TypeScript –∫–æ–¥ —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ `/api/carousel/create-and-generate`
- –≠—Ç–æ—Ç endpoint –ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù –≤ Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
- –ù—É–∂–Ω–æ –ª–∏–±–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å, –ª–∏–±–æ –æ–±–Ω–æ–≤–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –∫–æ–¥

### 2. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∫–∞—Ä—É—Å–µ–ª–∏**
- –¢–µ–∫—É—â–∏–µ endpoints –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç —Ç–æ–ª—å–∫–æ 2 —Ñ–∞–π–ª–∞ (main + photo)
- –ù–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ñ–æ—Ç–æ —Å–ª–∞–π–¥–æ–≤
- –ù–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º —Å—Ç–∞—Ç—É—Å–∞

### 3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ PNG –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏**
- SVG —Ñ–∞–π–ª—ã –Ω–µ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ PNG –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –§—Ä–æ–Ω—Ç–µ–Ω–¥ –ø–æ–ª—É—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ SVG —Å—Å—ã–ª–∫–∏

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

### 1. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é –∫–∞—Ä—É—Å–µ–ª—å**
```python
@app.route('/api/carousel/create-and-generate', methods=['POST'])
def create_and_generate_carousel():
    # –ü—Ä–∏–Ω–∏–º–∞—Ç—å –º–∞—Å—Å–∏–≤ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
    # –°–æ–∑–¥–∞–≤–∞—Ç—å main + –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ photo —Å–ª–∞–π–¥—ã
    # –í–æ–∑–≤—Ä–∞—â–∞—Ç—å carousel_id –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞
```

### 2. **–î–æ–±–∞–≤–∏—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É**
```python
@app.route('/api/carousel/<carousel_id>/status', methods=['GET'])
def get_carousel_status(carousel_id):
    # –í–æ–∑–≤—Ä–∞—â–∞—Ç—å —Å—Ç–∞—Ç—É—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
    # –°–ø–∏—Å–æ–∫ –≥–æ—Ç–æ–≤—ã—Ö —Å–ª–∞–π–¥–æ–≤ —Å URL
```

### 3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è PNG –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è**
- –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å PNG –≤–µ—Ä—Å–∏–∏ –¥–ª—è –ª—É—á—à–µ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- –î–æ–±–∞–≤–∏—Ç—å —Ä–∞–∑–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã (thumbnail, full)

### 4. **–£–ª—É—á—à–∏—Ç—å TypeScript –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é**
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å API endpoints —Å —Ä–µ–∞–ª—å–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π
- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å polling –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞

## üéØ –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

**–†–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ SVG —Å –∑–∞–º–µ–Ω–æ–π dyno –ø–æ–ª–µ–π
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ—Å—Ç—ã—Ö –∫–∞—Ä—É—Å–µ–ª–µ–π (main + photo)
- ‚úÖ –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

**–ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚ùå Endpoint `/api/carousel/create-and-generate`
- ‚ùå –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ñ–æ—Ç–æ —Å–ª–∞–π–¥—ã –≤ –æ–¥–Ω–æ–π –∫–∞—Ä—É—Å–µ–ª–∏
- ‚ùå –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º —Å—Ç–∞—Ç—É—Å–∞
- ‚ùå –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è PNG –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è

**–ù—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å:**
- üîß –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥/–±—ç–∫–µ–Ω–¥ API
- üîß –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–æ 10 —Ñ–æ—Ç–æ –≤ –∫–∞—Ä—É—Å–µ–ª–∏
- üîß –£–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- üîß –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö