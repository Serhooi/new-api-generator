# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ URL –¥–ª—è Supabase

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

–§—Ä–æ–Ω—Ç–µ–Ω–¥ –ø–æ–ª—É—á–∞–ª –ª–æ–∫–∞–ª—å–Ω—ã–µ URL-–∞–¥—Ä–µ—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/output/carousel/...`) –¥–∞–∂–µ –∫–æ–≥–¥–∞ —Ñ–∞–π–ª—ã –∑–∞–≥—Ä—É–∂–∞–ª–∏—Å—å –≤ Supabase, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –æ—à–∏–±–∫–∞–º "Failed to load slide".

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–û–±–Ω–æ–≤–ª–µ–Ω API –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ –≤–æ–∑–≤—Ä–∞—Ç–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö URL:

### 1. **–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞**
- –§–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ
- API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–µ URL: `/output/carousel/...`

### 2. **–ü—Ä–æ–¥–∞–∫—à–µ–Ω (Render + Supabase)**
- –§–∞–π–ª—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ Supabase Storage
- API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–Ω—ã–µ Supabase URL: `https://vahgmyuowsilbxqdjjii.supabase.co/storage/v1/object/public/images/carousel/...`

## üîß –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ

### `app.py`
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `generate_carousel()` –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö URL
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `generate_carousel_by_name()` –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö URL
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `get_carousel_slides()` –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö URL

### `app_simple.py`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Supabase
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `save_file_locally_or_supabase()`

## üöÄ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   ```python
   is_render = os.environ.get('RENDER', False) or (os.environ.get('SUPABASE_URL') and os.environ.get('SUPABASE_URL') != 'https://vahgmyuowsilbxqdjjii.supabase.co')
   ```

2. **–í—ã–±–æ—Ä URL –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   ```python
   if is_render and supabase:
       # Supabase URL
       image_url = supabase_url
   else:
       # –õ–æ–∫–∞–ª—å–Ω—ã–π URL
       image_url = f'/output/carousel/{filename}'
   ```

## üì± –†–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

–¢–µ–ø–µ—Ä—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ URL-–∞–¥—Ä–µ—Å–∞:

- **–õ–æ–∫–∞–ª—å–Ω–æ:** `/output/carousel/carousel_xxx_main.jpg`
- **–ù–∞ Render:** `https://vahgmyuowsilbxqdjjii.supabase.co/storage/v1/object/public/images/carousel/carousel_xxx_main.jpg`

## ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **–õ–æ–∫–∞–ª—å–Ω–æ:** API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–µ URL
2. **–ù–∞ Render:** API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç Supabase URL
3. **–§—Ä–æ–Ω—Ç–µ–Ω–¥:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º–∏ URL

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü—Ä–æ–±–ª–µ–º–∞ "Failed to load slide" –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞! API —Ç–µ–ø–µ—Ä—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ URL-–∞–¥—Ä–µ—Å–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –æ–∫—Ä—É–∂–µ–Ω–∏—è.
